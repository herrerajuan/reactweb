'use strict';
var $ = require('core-js/internals/export');
var requireObjectCoercible = require('core-js/internals/require-object-coercible');
var toInteger = require('core-js/internals/to-integer');
var toLength = require('core-js/internals/to-length');
var toString = require('core-js/internals/to-string');
var fails = require('core-js/internals/fails');

var FORCED = fails(function () {
  return 'ð ®·'.at(0) !== '\uD842';
});

// `String.prototype.at` method
// https://github.com/tc39/proposal-relative-indexing-method
$({ target: 'String', proto: true, forced: FORCED }, {
  at: function at(index) {
    var S = toString(requireObjectCoercible(this));
    var len = toLength(S.length);
    var relativeIndex = toInteger(index);
    var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;
    return (k < 0 || k >= len) ? undefined : S.charAt(k);
  }
});
